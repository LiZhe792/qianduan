import{d as e,_ as l,c as t,e as a,q as s,s as d,E as o,I as n,o as i,y as u,n as r,F as c,p as m,O as h,K as p,H as w,P as b,Q as f}from"./index-004b755c.js";/* empty css                     *//* empty css                 */import{c as g,f as V,d as _}from"./personServ-ce727b0b.js";/* empty css            *//* empty css               *//* empty css               */import{m as y,a as k}from"./messageBox-be09c343.js";const v=e({data:()=>({genderList:[{value:"1",title:"男"},{value:"2",title:"女"}],studentId:null,dataList:[]}),async created(){const e=this.$route.query.studentId;null!=e&&(this.studentId=parseInt(e.toString())),null!=this.studentId&&(this.dataList=await g(this.studentId))},methods:{addRow(){this.dataList.push({studentId:this.studentId})},async saveItem(e){const l=this.dataList[e],t=await V(l);0==t.code?y(this,"保存成功"):y(this,t.msg)},async deleteItem(e){if(!(await k("确认删除当前成员吗?")))return;const l=await _(this.dataList[e].memberId);0==l.code?(y(this,"删除成功"),this.dataList.splice(e,1)):y(this,l.msg)}}}),I={class:"base_form"},x=a("div",{class:"base_header"},[a("div",{class:"blue_column"}),a("div",{class:"base_title"},"学生家庭成员信息")],-1),L={class:"base_query_oneLine"},U={class:"query_left"},j={class:"table-content"};const q=l(v,[["render",function(e,l,g,V,_,y){const k=o,v=p,q=w,C=b,B=f,E=n;return i(),t("div",I,[x,a("div",L,[a("div",U,[s(k,{class:"commButton",onClick:l[0]||(l[0]=l=>e.addRow())},{default:d((()=>[u("添加一行")])),_:1})])]),a("div",j,[s(E,{data:e.dataList,"header-cell-style":{color:"#2E2E2E",fontSize:"10px",fontWeight:"400",background:"rgb(242,242,242)"},"row-style":{height:"10px"},"cell-style":{padding:"2px"},style:{width:"100%"}},{default:d((()=>[s(v,{label:"序号",fixed:"left",width:"50",color:"black"},{default:d((e=>[u(r(e.$index+1),1)])),_:1}),s(v,{label:"关系",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.relation,"onUpdate:modelValue":l=>e.row.relation=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(v,{label:"姓名",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(v,{label:"性别",width:"150",color:"black",align:"center"},{default:d((l=>[s(B,{modelValue:l.row.gender,"onUpdate:modelValue":e=>l.row.gender=e,placeholder:"请选择性别",style:{width:"90%"}},{default:d((()=>[(i(!0),t(c,null,m(e.genderList,(e=>(i(),h(C,{key:e.value,label:e.title,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),s(v,{label:"年龄",width:"100",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.age,"onUpdate:modelValue":l=>e.row.age=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(v,{label:"单位",width:"150",color:"black",align:"center"},{default:d((e=>[s(q,{modelValue:e.row.unit,"onUpdate:modelValue":l=>e.row.unit=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(v,{label:"操作",width:"150",color:"black",align:"center"},{default:d((l=>[s(k,{class:"commButton",onClick:t=>e.saveItem(l.$index)},{default:d((()=>[u("保存")])),_:2},1032,["onClick"]),s(k,{class:"commButton",onClick:t=>e.deleteItem(l.$index)},{default:d((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"])])])}]]);export{q as default};
